
<div style="width:100%">
  <span class="d-inline-flex">
    <h1><%= @survey.name %></h1>
    <a class="button outline-button m-2" id="bt-popup">Preview Survey</a>
      <%= link_to "Survey answers", survey_question_answers_path(@survey), class: "button outline-button m-2" %>
    <%= link_to "Survey participants", participants_path(survey_id: @survey), class:  "button outline-button m-2" %>
  </span>
  <hr style="border-bottom: 4px solid #FCCD08">
</div>

<%#= simple_form_for([@survey, WelcomeMessage.new]) do |f| %>
  <%#= f.input :title %>
  <%#= f.button :submit, class: "button"  %>
<%# end %>


<%= render 'survey_questions/new_question', survey: @survey, question: @survey_question %>

  <ol id="questions">
    <% @survey.survey_questions.each do |question| %>
    <li class="row my-3 py-2 border-bottom">
      <%= render 'survey_questions/add_question', survey: @survey, question: question %>
      </li>
    <% end %>
  </ol>
  <%= link_to "Back", project_path(@survey.project.id), class: "btn sec-button"%>

  <button id="edit-form-done" class="btn btn-primary">Finish Editing</button>
  <%= link_to "", project_path(@survey.project), id: "redirect"  %>

</div>

<%#= simple_form_for([@survey, ThankyouScreen.new]) do |f| %>
  <%#= f.input :title %>
  <%#= f.button :submit, class: "button"  %>
<%# end %>

<!-- Graphs -->
<%#= pie_chart SurveyQuestion.group(:question).count %>




<script src="https://embed.typeform.com/embed.js" type="text/javascript"></script>
<script type="text/javascript">
  let popup1;
  window.addEventListener('DOMContentLoaded', function () {

      popup1 = window.typeformEmbed.makePopup("https://admin.typeform.com/to/<%= @survey.typeform_id  %>", {
        hideHeaders: true,
        hideFooter: true
      });
    })

    document.getElementById('bt-popup').addEventListener('click', function () {
      popup1.open();
    });
</script>

